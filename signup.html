<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content=" width=device-width, initial-scale=1.0">

  <!-- Style -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/6.6.6/css/flag-icons.min.css"/>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      background-color: rgb(240, 234, 237);
      margin: 0;
      padding: 0;
    }
    a.button {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 25px;
      background-color: #b38e62;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    a.button:hover {
      background-color: #8a5d28;
    }
    .container {
      max-width: 450px;
      margin: 50px auto;
      padding: 30px;
      background-color: bisque;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }
    h3 {
      text-align: center;
      font-weight: bold;
      margin-bottom: 10px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
      margin-bottom: 15px;
    }
    .phone-group {
      display: flex;
      align-items: center;
    }
    #phoneCode {
      width: 80px;
      text-align: center;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin-right: 8px;
      background-color: #f9f9f9;
      font-weight: bold;
    }
    #phoneNumber {
      flex: 1;
    }
    button {
      width: 100%;
      padding: 12px;
      background-color: rgb(98, 147, 190);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
    }
    button:hover {
      background-color: rgb(77, 120, 160);
    }
    nav{
      background-color: black;
      padding: 15px;
      text-align: center;
    }
    nav a{
      margin: 0 12px;
      text-decoration: none;
      color: #ddd;
      font-weight: bold;
      font-size: 1.1rem;
    }
    footer {
      margin-top: 40px;
      background-color: #0e0c0e;
      text-align: center;
      padding: 12px;
      font-size: 0.9rem;
      color: #e5dcdc;
    }
    .offer {
      background: #fbf9fa;
      padding: 10px;
      border-radius: 8px;
      color: #0e0c0e;
      font-size: 0.95rem;
      margin-top: 5px;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
 
  <nav>
    <a href="home.html" target="_blank">Home</a>
    <a href="about.html" target="_blank">About Us</a>
    <a href="location.html" target="_blank">Location</a>
    <a href="try.html" target="_blank">Our Products</a>
    <a href="signup.html" target="_blank">Sign up</a>
    <a href="contact.html" target="_blank">Contact us</a>
  </nav>

  <div class="container">
    <h3>Create New Account</h3>
    <p class="offer"> Welcome to EliteTresses! <br>
      Make an account with us and get 20% off.</p>
    
    <form id="signupForm">
      <label for="fullname">Full Name:</label>
      <input type="text" id="fullname" name="fullname" required>

      <label for="countryCode">Country Code:</label>
      <select id="countryCode" style="width: 100%"></select>

      <label for="phoneNumber">Phone Number:</label>
      <div class="phone-group">
        <input type="text" id="phoneCode" name="phoneCode" readonly>
        <input type="tel" id="phoneNumber" name="phoneNumber" required placeholder="Enter your number">
      </div>

      <label for="email">Email Address:</label>
      <input type="email" id="email" name="email" required>

      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required>

      <label for="gender">Gender:</label>
      <select id="gender" name="gender" required>
        <option value="">--Select Gender--</option>
        <option value="Female">Female</option>
        <option value="Male">Male</option>
        <option value="Others">Others</option>
      </select>

      <label for="dob">Date of Birth:</label>
      <input type="date" id="dob" name="dob" required>

      <label for="streetaddress">Street Address:</label>
      <input type="text" id="streetaddress" name="streetaddress" required>

      <label for="country">Region/Country:</label>
      <select id="country" name="country" required>
        <option value="">--Select your country--</option>
        <option value="Nigeria">Nigeria</option>
        <option value="Italy">Italy</option>
      </select>

      <label for="state">State/Region:</label>
      <select id="state" name="state" required>
        <option value="">--Select State/Region--</option>
      </select>

      <p>Already have an account? <a href="login.html">Log in here</a>.</p>
      <button type="submit">Sign Up</button>
    </form>
  </div>

  <!-- Scripts -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

  <script>
    $(document).ready(function () {
      // Country codes with flags
      const countries = [
        { id: '+234', text: 'Nigeria (+234)', flag: 'https://flagcdn.com/ng.svg' },
        { id: '+39', text: 'Italy (+39)', flag: 'https://flagcdn.com/it.svg' },
        { id: '+44', text: 'United Kingdom (+44)', flag: 'https://flagcdn.com/gb.svg' }
      ];

      function formatFlag(country) {
        if (!country.id) return country.text;
        return $(`
          <span>
            <img src="${country.flag}" style="width:20px; margin-right:8px; vertical-align:middle;"/>
            ${country.text}
          </span>
        `);
      }

      $('#countryCode').select2({
        data: countries,
        templateResult: formatFlag,
        templateSelection: formatFlag,
        escapeMarkup: markup => markup,
        placeholder: "Select country code"
      });

      // Auto-fill phone code when selecting country
      $('#countryCode').on('change', function () {
        const selected = $(this).val();
        $('#phoneCode').val(selected);
      });

      // Dependent dropdown: states for each country
      const states = {
        Nigeria: [
          "Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River",
          "Delta","Ebonyi","Edo","Ekiti","Enugu","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina",
          "Kebbi","Kogi","Kwara","Lagos","Nassarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau",
          "Rivers","Sokoto","Taraba","Yobe","Zamfara"
        ],
        Italy: [
          "Abruzzo","Basilicata","Calabria","Campania","Emilia-Romagna","Friuli Venezia Giulia",
          "Lazio","Liguria","Lombardy","Marche","Molise","Piedmont","Apulia","Sardinia",
          "Sicily","Tuscany","Trentino-Alto Adige","Umbria","Aosta Valley","Veneto"
        ]
      };

      $('#country').on('change', function () {
        const selectedCountry = $(this).val();
        const $state = $('#state');
        $state.empty().append('<option value="">--Select State/Region--</option>');

        if (states[selectedCountry]) {
          states[selectedCountry].forEach(function (st) {
            $state.append('<option value="'+st+'">'+st+'</option>');
          });
        }
      });

      // Handle sign up (save multiple users to localStorage)
      document.getElementById("signupForm").addEventListener("submit", function(e) {
        e.preventDefault();

        const user = {
          fullname: document.getElementById("fullname").value,
          email: document.getElementById("email").value,
          password: document.getElementById("password").value,
          phone: document.getElementById("phoneNumber").value,
          gender: document.getElementById("gender").value,
          dob: document.getElementById("dob").value,
          street: document.getElementById("streetaddress").value,
          country: document.getElementById("country").value,
          state: document.getElementById("state").value
        };

        // Get existing users or empty array
        let users = JSON.parse(localStorage.getItem("users")) || [];

        // Check if email already exists
        const existingUser = users.find(u => u.email === user.email);
        if (existingUser) {
          alert("This email is already registered. Please log in instead.");
          return;
        }

        // Add new user
        users.push(user);
        localStorage.setItem("users", JSON.stringify(users));

        // ðŸ”‘ Save active user for profile
        localStorage.setItem("activeUser", JSON.stringify(user));

        // Redirect to profile page
        window.location.href = "profile.html";
      });
    });
  </script>

  <footer>
    <div class="footer-bottom">
      &copy; 2025 EliteTresses | All Rights Reserved.
    </div>
  </footer>

</body>
</html>
