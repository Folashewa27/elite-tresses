<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Cart - EliteTresses</title>
  <style>
    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .footer-column {
      flex: 1;
      min-width: 200px;
      margin-bottom: 20px;
    }

    .footer-column strong {
      display: block;
      font-size: 18px;
      margin-bottom: 15px;
      border-bottom: 2px solid #fff;
      padding-bottom: 5px;
    }
    .footer-column ul {
      list-style: none;
      padding: 0;
    }

    .footer-column ul li {
      margin-bottom: 10px;
    }

    .footer-column ul li a {
      text-decoration: none;
      color: #ccc;
      transition: color 0.3s;
    }

    .footer-column ul li a:hover {
      color: #fff;
    }

    .footer-bottom {
      text-align: center;
      margin-top: 30px;
      color: #888;
      font-size: 14px;
    }
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .footer-column {
        width: 100%;
      }
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: white;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    header,
    footer {
      background-color: black;
      color: white;
      text-align: center;
      padding: 15px 0;
    }
    main {
      max-width: 900px;
      margin: 30px auto;
    }
    h1 {
      color: #d10024;
      text-align: center;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }
    th,
    td {
      border: 1px solid #ddd;
      padding: 12px 15px;
      text-align: center;
      vertical-align: middle;
    }
    th {
      background-color: #f8f8f8;
    }
    img {
      max-width: 80px;
      border-radius: 5px;
    }
    input[type='number'] {
      width: 60px;
      padding: 5px;
      font-size: 1rem;
      text-align: center;
    }
    button.remove-btn {
      background-color: #d10024;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    button.remove-btn:hover {
      background-color: #a8001d;
    }
    .total-row td {
      font-weight: bold;
      font-size: 1.2rem;
      color: #d10024;
    }
    .empty-message {
      text-align: center;
      font-style: italic;
      color: #666;
      margin-top: 40px;
    }
    .btn {
      display: inline-block;
      background-color: #d10024;
      color: white;
      padding: 10px 20px;
      margin-top: 30px;
      border-radius: 5px;
      text-decoration: none;
      font-weight: bold;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .btn:hover {
      background-color: #a8001d;
    }
  </style>
</head>
<body>
  <header>
    <h2>EliteTresses</h2>
    <nav>
      <a href="try.html" style="color: white; margin-right: 20px;">Continue Shopping</a>
    </nav>
  </header>

  <main>
    <h1>Your Shopping Cart</h1>

    <table aria-label="Shopping Cart Items" id="cart-table">
      <thead>
        <tr>
          <th>Product</th>
          <th>Name</th>
          <th>Price (₦)</th>
          <th>Quantity</th>
          <th>Subtotal (₦)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="cart-items"></tbody>
      <tfoot>
        <tr class="total-row">
          <td colspan="4" style="text-align: right;">Total:</td>
          <td id="cart-total">₦0.00</td>
          <td></td>
        </tr>
      </tfoot>
    </table>

    <p class="empty-message" id="empty-message" style="display: none;">
      Your cart is empty. <a href="try.html">Go shopping!</a>
    </p>

    <!-- Checkout button -->
    <button id="checkout-btn" class="btn" style="display: none;" onclick="goToCheckout()">Proceed to Checkout</button>
  </main>

  <footer>
    <div class="container">
      <!-- Quick Links Column -->
      <div class="footer-column">
        <strong>QUICK LINKS</strong>
        <ul>
          <li><a href="home.html">Home</a></li>
          <li><a href="about.html">About Us</a></li>
          <li><a href="try.html">Our Products</a></li>
          <li><a href="signup.html">Sign Up</a></li>
          <li><a href="contact.html">Contact Us</a></li>
        </ul>
      </div>

      <!-- Policies Column -->
      <div class="footer-column">
        <strong>POLICIES</strong>
        <ul>
          <li><a href="ship.html">Shipment Policy</a></li>
          <li><a href="terms.html">Terms of Service</a></li>
          <li><a href="refund.html">Refund Policy</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      &copy; 2025 EliteTresses | All Rights Reserved.
    </div>
  </footer>

  <script>
  const cartTableBody = document.getElementById('cart-items');
  const cartTotalElem = document.getElementById('cart-total');
  const emptyMessage = document.getElementById('empty-message');
  const checkoutBtn = document.getElementById('checkout-btn');

  function loadCart() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    if (cart.length === 0) {
      cartTableBody.innerHTML = '';
      emptyMessage.style.display = 'block';
      checkoutBtn.style.display = 'none';
      cartTotalElem.textContent = '₦0.00';
      return;
    }

    emptyMessage.style.display = 'none';
    checkoutBtn.style.display = 'inline-block';

    cartTableBody.innerHTML = '';

    let total = 0;

    cart.forEach((item, index) => {
      const subtotal = item.price * item.quantity;
      total += subtotal;

      const tr = document.createElement('tr');

      tr.innerHTML = `
        <td><img src="${item.image}" alt="${item.name}" /></td>
        <td>${item.name}</td>
        <td>₦${item.price.toLocaleString()}</td>
        <td>
          <input type="number" min="1" value="${item.quantity}" data-index="${index}" />
        </td>
        <td>₦${subtotal.toLocaleString()}</td>
        <td><button class="remove-btn" data-index="${index}">Remove</button></td>
      `;

      cartTableBody.appendChild(tr);
    });

    cartTotalElem.textContent = '₦' + total.toLocaleString();

    // Add event listeners for quantity change and remove
    document.querySelectorAll('input[type="number"]').forEach((input) => {
      input.addEventListener('change', (e) => {
        const idx = e.target.dataset.index;
        let newQty = parseInt(e.target.value);
        if (isNaN(newQty) || newQty < 1) {
          newQty = 1;
          e.target.value = 1;
        }
        updateQuantity(idx, newQty);
      });
    });

    document.querySelectorAll('.remove-btn').forEach((btn) => {
      btn.addEventListener('click', (e) => {
        const idx = e.target.dataset.index;
        removeItem(idx);
      });
    });
  }

  function updateQuantity(index, quantity) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    if (cart[index]) {
      cart[index].quantity = quantity;
      localStorage.setItem('cart', JSON.stringify(cart));
      loadCart();
    }
  }

  function removeItem(index) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    if (cart[index]) {
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      loadCart();
    }
  }

  // Proceed to checkout: Save cart items for book.html
  function goToCheckout() {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    localStorage.setItem('cartItems', JSON.stringify(cart)); // ✅ save under the correct key
    window.location.href = "book.html"; // ✅ only redirect on button click
  }

  // Initial load
  loadCart();
</script>
</body>
</html>